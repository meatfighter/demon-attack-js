"use strict";(self.webpackChunkdemon_attack_js=self.webpackChunkdemon_attack_js||[]).push([[524],{706:(e,t,n)=>{n.r(t),n.d(t,{init:()=>bt});var o=n(710),s=n.n(o);const i=5,r=new AudioContext;let a=!0;document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState?(a=!0,"suspended"===r.state&&r.resume()):"hidden"===document.visibilityState&&(a=!1,"running"===r.state&&r.suspend())}));const l=r.createGain();l.connect(r.destination),l.gain.value=.1;const c=[],h=new Map;function d(e){l.gain.value=e/100}function u(e){if("suspended"===r.state)return void(a&&r.resume().then((()=>u(e))));const t=r.createBufferSource();t.buffer=h.get(e),t.connect(l),t.start()}class m{r;g;b;constructor(e,t,n){this.r=e,this.g=t,this.b=n}}var f,p;!function(e){e[e.WIDTH=160]="WIDTH",e[e.HEIGHT=228]="HEIGHT"}(f||(f={})),function(e){e[e.WIDTH=4]="WIDTH",e[e.HEIGHT=3]="HEIGHT"}(p||(p={}));const g=new Array(256),v=new Array(121),w=new Array(62),y=new Array(256),x=new Array(7),E=new Array(6),A=new Array(7),M=new Array(7),D=new Array(16),b=new Array(7),k=new Array(3),C=new Array(7);let B,O;const I=new Array(8);async function T(){await new Promise((e=>setTimeout(e,0))),await new Promise((e=>requestAnimationFrame(e)))}function L(e,t,n){const o=new ImageData(e,t);n(o);const s=document.createElement("canvas");s.width=e,s.height=t;const i=s.getContext("2d");if(!i)throw new Error("Failed to create canvas rendering context.");return i.putImageData(o,0,0),s}function S(e){const t=new Array(e.height),n=e.getContext("2d");if(!n)throw new Error("Failed to create canvas rendering context.");const o=n.getImageData(0,0,e.width,e.height),{data:s}=o;for(let n=0,o=3;n<e.height;++n){t[n]=new Array(e.width);for(let i=0;i<e.width;++i,o+=4)t[n][i]=0!==s[o]}return t}function N(e,t,n,o){const s=4*(n*e.width+t),i=e.data;i[s]=o.r,i[s+1]=o.g,i[s+2]=o.b,i[s+3]=255}var G;!function(e){e[e.NONE=-1]="NONE",e[e.TOP=0]="TOP",e[e.MIDDLE=1]="MIDDLE",e[e.BOTTOM=2]="BOTTOM",e[e.DIVING=3]="DIVING"}(G||(G={}));class F{v=0;v0=0;v1=0;steps=0;s=0;reset(e,t,n){this.v=e,this.v0=e,this.v1=t,this.steps=n,this.s=0}update(){if(++this.s>=this.steps)return this.s=this.steps,this.v=this.v1,!0;const e=this.s/this.steps;let t=0;if(e<=.5){const n=2*e;t=n*n/2}else{const n=2*(e-1);t=1-n*n/2}return this.v=this.v0+t*(this.v1-this.v0),!1}getMin(){return this.v1>this.v0?this.v:this.v1}getMax(){return this.v1>this.v0?this.v1:this.v}}function H(e,t){let n,o;do{n=Math.random()}while(0===n);do{o=Math.random()}while(0===o);return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*o)*t+e}function R(e,t,n){return e<t?t:e>n?n:e}function _(e,t,n,o,s,i){s=Math.floor(s),i=Math.floor(i),e=Math.floor(e)-s,t=Math.floor(t)-i;const r=o[0].length-1,a=o.length-1,l=t+n-1;if(l<0||e<0||t>a||e>r)return!1;const c=Math.min(l,a);for(let n=Math.max(t,0);n<=c;++n)if(o[n][e])return!0;return!1}Math.PI;let X=0,P=0,Q=!1,Y=!1,K=!1,W=null,J=!1,$=!1,j=!1,z=!1;class V{timestampDown=0;xDown=0;yDown=0;x=0;y=0}const Z=new Map;function U(){return Y||X>P}function q(){return K||P>X}function ee(){return Q}function te(){null!==W&&(clearTimeout(W),W=null),J&&(document.body.style.cursor="default",J=!1)}function ne(){te(),W=window.setTimeout((()=>{document.body.style.cursor="none",J=!0}),3e3)}function oe(e){e.preventDefault();const t=window.innerWidth,n=window.innerHeight,o=t>=n;for(let t=e.changedTouches.length-1;t>=0;--t){const s=e.changedTouches[t];let i,r;switch(o?(i=s.clientX,r=s.clientY):(i=n-1-s.clientY,r=s.clientX),e.type){case"touchstart":{const e=new V;e.timestampDown=Date.now(),e.xDown=e.x=i,e.yDown=e.y=r,Z.set(s.identifier,e);break}case"touchmove":{ne();const e=Z.get(s.identifier);e&&(e.x=i,e.y=r);break}case"touchend":case"touchcancel":{const e=Z.get(s.identifier);e&&(i<64&&r<64&&e.xDown<64&&e.yDown<64&&ot(),Z.delete(s.identifier));break}}}let s=null;for(const[t,n]of Array.from(Z)){(!s||n.timestampDown>s.timestampDown)&&(s=n);e:{for(let n=e.touches.length-1;n>=0;--n)if(e.touches[n].identifier===t)break e;Z.delete(t)}}s?s.x<t/2?(Y=!0,K=!1):(Y=!1,K=!0):Y=K=!1}function se(e){if(!e.clientX||!e.clientY)return;const t=window.innerWidth,n=window.innerHeight;let o,s;t>=n?(o=e.clientX,s=e.clientY):(o=n-1-e.clientY,s=e.clientX),o<64&&s<64&&ot()}function ie(e){switch(e.code){case"KeyA":case"ArrowLeft":X=P+1;break;case"KeyD":case"ArrowRight":P=X+1;break;case"Escape":ot();break;default:Q=!0}}function re(e){switch(e.code){case"KeyA":case"ArrowLeft":X=0;break;case"KeyD":case"ArrowRight":P=0;break;case"Escape":break;default:Q=!1}}const ae="demon-attack-store";class le{highScore=0;volume=10;autofire=function(){const e="ontouchstart"in window||navigator.maxTouchPoints>0,t=window.matchMedia("(hover: hover)").matches,n=window.matchMedia("(pointer: coarse)").matches;return e&&!t&&n}();tracer=!1;fast=!1;score=0;level=0;bunkers=3;spawnedDemons=0;cannonExploded=!1}let ce;function he(){localStorage.setItem(ae,JSON.stringify(ce))}const de=185;class ue{x=87;exploding=!1;explodingCounter=0;exploded=!1;reset(){this.x=87,this.exploding=!1,this.explodingCounter=0,this.exploded=!1}explode(){this.exploding=this.exploded=!0,u("sfx/explodes-cannon.mp3")}update(e){this.exploding?(e.demonBullets.length=0,e.backgroundColor=Math.max(0,14-(254&this.explodingCounter)),64==++this.explodingCounter&&(this.exploding=!1,this.explodingCounter=0,this.x=87,0===e.bunkers?(e.animatingGameOver=!0,e.score>ce.highScore&&(ce.highScore=e.score,e.newHighScore=!0),ce.level=0,ce.score=0,ce.spawnedDemons=0,ce.bunkers=3,ce.cannonExploded=!1,u("sfx/ends-game.mp3")):--e.bunkers)):U()?this.x>25&&(this.x-=ce.fast?2:1):q()&&this.x<135&&(this.x+=ce.fast?2:1)}render(e,t){this.exploding?t.drawImage(I[this.explodingCounter>>3],this.x-4,163):t.drawImage(B,this.x,de)}}var me;!function(e){e[e.LOADED=0]="LOADED",e[e.FIRING=1]="FIRING"}(me||(me={}));const fe=g[110];class pe{state=me.LOADED;x=0;y=0;autofireTimer=0;load(){this.state=me.LOADED}update(e){U()||q()||ee()?this.autofireTimer=180:this.autofireTimer>0&&--this.autofireTimer,this.state===me.LOADED?(this.x=e.cannon.x+3,this.y=186,!e.cannon.exploding&&(ee()||ce.autofire&&this.autofireTimer>0)&&(this.state=me.FIRING,this.y-=e.cannonFiringSpeed,ce.autofire||u("sfx/shoots-cannon.mp3"))):this.y<32?(this.state=me.LOADED,this.x=e.cannon.x+3,this.y=186):(ce.tracer&&(this.x=e.cannon.x+3),this.y-=e.cannonFiringSpeed)}render(e,t){if(this.state===me.LOADED&&e.cannon.exploding)return;const n=this.y+7;if(n<32)return;const o=Math.max(32,this.y);t.fillStyle=fe,t.fillRect(this.x,o,1,n-o+1)}}const ge=g[78],ve=[[1,0,18,5,0,0],[2,18,2,9,0,0],[1,12,3,13,0,0],[0,14,1,7,5,4],[0,28,4,25,2,1],[3,23,2,15,5,14]],we=[];!function(){for(const e of ve){const t=[];for(let n=0;n<e.length;++n){const o=e[n],s=n+1;for(let e=0;e<o;++e)t.push(s)}we.push(t)}}();class ye{demon;x;y;shots;xOffset=0;constructor(e,t,n,o){this.demon=e,this.x=t,this.y=n,this.shots=o}update(e){const t=1==(e.level>>1&1);if(0===e.demonBulletDropTimer){if(this.demon.split||!t){const e=Math.random();t?e<.0625?--this.xOffset:e<.125&&++this.xOffset:e<.25?--this.xOffset:e<.5&&++this.xOffset}if(e.level>=8&&(this.x=Math.floor(this.demon.x)+4),this.y+=8,this.y>=198){const{demonBullets:t}=e;for(let e=t.length-1;e>=0;--e)if(t[e]===this){t.splice(e,1);break}}}const{cannon:n}=e;if(!n.exploding){const o=Math.floor(this.demon.y+12);let s,i;if(t?(s=this.y,i=s+7):(s=1===e.demonBulletDropTimer?this.y:this.y+4,i=s+3),s=Math.max(o,s),i=Math.min(196,i),s>196||i<s)return;const r=this.x+this.xOffset;(_(r+this.shots[0],s,i-s+1,O,n.x,de)||this.shots.length>1&&_(r+this.shots[1],s,i-s+1,O,n.x,de))&&n.explode()}}render(e,t){const n=Math.floor(this.demon.y+12);let o,s;if(e.level>>1&1?(o=this.y,s=o+7):(o=1===e.demonBulletDropTimer?this.y:this.y+4,s=o+3),o=Math.max(n,o),s=Math.min(196,s),o>196||s<o)return;t.fillStyle=ge;const i=this.x+this.xOffset;t.fillRect(i+this.shots[0],o,1,s-o+1),this.shots.length>1&&t.fillRect(i+this.shots[1],o,1,s-o+1)}}const xe=new Array(12);for(let e=0;e<12;++e)xe[e]=`sfx/explodes-demon-${e.toString().padStart(2,"0")}.mp3`;class Ee{x;y;tier;xEaser=new F;yEaser=new F;sprite=0;flap=0;flapCounter=8;spawning=28;exploding=!1;explodingCounter=0;split=!1;leftHalf=!1;partner=null;movingLeft=!1;constructor(e,t,n){this.x=e,this.y=t,this.tier=n}update(e){if(this.exploding&&24==++this.explodingCounter){if(this.split||e.level<4)return void e.removeDemon(this);this.exploding=!1,this.explodingCounter=0,this.split=!0,this.leftHalf=!0,this.partner=new Ee(this.x+8,this.y,this.tier),this.partner.sprite=this.sprite,this.partner.flap=this.flap,this.partner.flapCounter=this.flapCounter,this.partner.spawning=0,this.partner.split=!0,this.partner.partner=this,this.partner.yEaser=this.yEaser,e.demons.push(this.partner)}if(this.spawning>0)--this.spawning;else if(!this.exploding){const{cannonBullet:t}=e;if(t.state===me.FIRING&&_(t.x,t.y,ce.autofire?12:8,this.split?k[this.sprite]:E[e.demonType][this.sprite],this.x,this.y)){t.load(),this.exploding=!0,this.explodingCounter=Math.floor(5*Math.random());let n=5*(Math.min(5,e.level>>1)+2);if(this.split&&(n*=this.tier===G.DIVING?3:2),e.score+=n,this.tier===G.BOTTOM&&(!this.split||this.leftHalf)){const{demonBullets:t}=e;for(let e=t.length-1;e>=0;--e)t[e].y<this.y&&t.splice(e,1)}u(xe[e.level%12])}}if(0==--this.flapCounter&&(this.flapCounter=8,this.flap=this.flap+1&3,this.sprite=3===this.flap?1:this.flap),this.tier===G.DIVING){const{cannon:t}=e;this.exploding||t.exploding||!function(e,t,n,o,s,i){t=Math.floor(t),n=Math.floor(n);const r=e[0].length-1,a=e.length-1;s=Math.floor(s)-t,i=Math.floor(i)-n;const l=s+o[0].length-1,c=i+o.length-1;if(c<0||a<i||l<0||r<s)return!1;const h=Math.max(0,s),d=Math.min(r,l),u=Math.max(0,i),m=Math.min(a,c);for(let t=u;t<=m;++t)for(let n=h;n<=d;++n)if(e[t][n])return!0;return!1}(k[this.sprite],this.x,this.y,O,t.x,de)?(this.xEaser.update()&&this.resetXEaserForDive(e),this.x=this.xEaser.v,this.yEaser.update()&&this.resetYEaserForDive(e),this.y=this.yEaser.v,this.y>=188&&e.removeDemon(this)):(t.explode(),e.removeDemon(this))}else this.split&&!this.leftHalf?this.movingLeft?(this.x-=.75,this.x<=20&&(this.movingLeft=!1)):(this.x+=.75,this.x>=151&&(this.movingLeft=!0)):(this.xEaser.update()&&(this.tier!==G.BOTTOM||this.exploding||0!==this.spawning||!(!this.split||this.leftHalf&&this.partner)||e.divingDemon?this.resetXEaserRandomly(e):0!==e.demonBullets.length||e.cannon.exploding?(e.cannon.exploding||e.demonBullets.length>0&&e.demonBullets[e.demonBullets.length-1].y>=this.y+8)&&this.resetXEaserRandomly(e):function(e,t){const{level:n,demonBullets:o}=e,s=1==(n>>1&1);let i=Math.floor(t.x)+4,r=4;if(!s){const e=n%12,t=we[e>>1&6|1&e];r=t[Math.floor(t.length*Math.random())]}for(let e=r-1,n=8*Math.floor(t.y/8)+6;e>=0;--e,n-=8)Math.random()<.125&&(n-=8),o.push(new ye(t,i,n,D[s?t.split?0:12:Math.floor(t.split?2*(1+Math.random()):D.length*Math.random())]));e.demonBulletDropTimer=e.demonBulletDropTimerReset-1}(e,this)),this.x=this.xEaser.v),this.split&&!this.leftHalf&&this.partner||this.yEaser.update()&&(!this.split||this.partner||e.divingDemon||e.cannon.exploding||0!==e.demonBullets.length||this.tier!==G.BOTTOM?this.resetYEaserRandomly(e):this.startDiving(e)),this.y=this.yEaser.v}startDiving(e){this.tier=G.DIVING;const{demons:t}=e;for(let e=t.length-1;e>=0;--e){const n=t[e];n!==this&&++n.tier}e.divingDemon=this,this.yEaser.v1=this.yEaser.v0-1,this.resetXEaserForDive(e),this.resetYEaserForDive(e)}resetXEaserForDive(e){this.xEaser.reset(this.x,R(this.x<e.cannon.x?this.x+20:this.x-20,20,151),32)}resetYEaserForDive(e){this.yEaser.v1<this.yEaser.v0?this.yEaser.reset(this.y,this.y+20,16):this.yEaser.reset(this.y,this.y-12,16)}resetXEaserRandomly(e){let t;if(this.tier===G.BOTTOM){const{cannon:n,cannonBullet:o}=e;t=this.x+4<n.x?H(n.x-(o.y+8<this.y?10:16),2):H(n.x+(o.y+8<this.y?3:9),2)}else t=H(this.x,32);if(t=R(t,20,this.split?151:143),this.tier===G.BOTTOM){const{demonBullets:n,demonBulletDropTimerReset:o}=e;if(n.length>0){const e=o*(198-n[n.length-1].y)/10;t=t>this.x?this.x+Math.min(e,t-this.x):this.x-Math.min(e,this.x-t)}}this.xEaser.reset(this.x,t,2*Math.abs(t-this.x+1))}resetYEaserRandomly(e){let t=56,n=141;const{demons:o}=e;switch(this.tier){case G.TOP:n-=16;for(let e=o.length-1;e>=0;--e){const t=o[e];t!==this&&t.tier>G.TOP&&(n=Math.min(n,t.yEaser.getMin()-8))}break;case G.MIDDLE:t+=8,n-=8;for(let e=o.length-1;e>=0;--e){const s=o[e];s!==this&&(s.tier<G.MIDDLE?t=Math.max(t,s.yEaser.getMax()+8):s.tier>G.MIDDLE&&(n=Math.min(n,s.yEaser.getMin()-8)))}break;case G.BOTTOM:t+=16;for(let e=o.length-1;e>=0;--e){const s=o[e];s!==this&&(s.tier<G.BOTTOM?t=Math.max(t,s.yEaser.getMax()+8):s.tier>G.BOTTOM&&(n=Math.min(n,s.yEaser.getMin()-8)))}}t=Math.min(t,n),n=Math.max(t,n),this.yEaser.reset(this.y,t+(n-t)*Math.random(),n-t+1)}render(e,t){if(this.exploding){const n=this.explodingCounter>>3;let o;o=this.split?C[e.demonPalette][n]:A[e.demonPalette][e.level<4?0:1][n],n<3&&t.drawImage(o,Math.floor(this.x),Math.floor(this.y))}else if(this.spawning>0)if(1===this.spawning)t.drawImage(x[e.demonPalette][e.demonType][this.sprite],Math.floor(this.x),Math.floor(this.y),32,8);else{const n=this.spawning-1<<2;t.drawImage(M[e.demonPalette][this.sprite][0],Math.floor(this.x-n),Math.floor(this.y),32,8),t.drawImage(M[e.demonPalette][this.sprite][1],Math.floor(this.x+n),Math.floor(this.y),32,8)}else t.drawImage(this.split?b[e.demonPalette][this.sprite]:x[e.demonPalette][e.demonType][this.sprite],Math.floor(this.x),Math.floor(this.y))}}const Ae=[3,3,4,4,5,5,5,5,6],Me=[8,6,6,3,5,4];class De{level=0;demonPalette=0;demonType=0;backgroundColor=0;baseColor=0;bunkers;bunkerColor=0;score;scoreColor=44;cannon=new ue;cannonBullet=new pe;cannonFiringSpeed=0;demons=new Array;spawnDelay=0;spawnedDemons;divingDemon=null;demonBullets=new Array;demonBulletDropTimer=0;demonBulletDropTimerReset=0;animatingExtraBunker=!1;animatingGameOver=!1;newHighScore=!1;pulseCounter=0;constructor(){this.setLevel(ce.level),this.score=ce.score,this.spawnedDemons=ce.spawnedDemons,this.bunkers=ce.bunkers,this.cannon.exploded=ce.cannonExploded}setLevel(e){this.level=e,this.demonPalette=e%7,this.demonType=(e>>1)%6,this.cannonFiringSpeed=ce.autofire?12:Ae[Math.min(8,e)],this.demonBulletDropTimerReset=Me[e<4?e:4+(1&e)],this.spawnDelay=30,this.demonBulletDropTimer=0,this.spawnedDemons=0}incrementLevel(){this.setLevel(this.level+1)}countDemons(){let e=!1,t=!1,n=!1,o=null!=this.divingDemon;for(let s=this.demons.length-1;s>=0;--s)switch(this.demons[s].tier){case G.TOP:e=!0;break;case G.MIDDLE:t=!0;break;case G.BOTTOM:n=!0;break;case G.DIVING:o=!0}let s=0;return e&&++s,t&&++s,n&&++s,o&&++s,s}save(){this.animatingGameOver||this.cannon.exploding&&0===this.bunkers?(ce.level=0,ce.score=0,ce.spawnedDemons=0,ce.bunkers=3,ce.cannonExploded=!1):(ce.level=this.level,ce.score=this.score,ce.cannonExploded=this.cannon.exploded,ce.spawnedDemons=Math.max(0,this.spawnedDemons-this.countDemons()),this.cannon.exploding?ce.bunkers=Math.max(0,this.bunkers-1):this.animatingExtraBunker?ce.bunkers=Math.min(6,this.bunkers+1):ce.bunkers=this.bunkers),he()}removeDemon(e){this.divingDemon==e&&(this.divingDemon=null),e.partner&&(e.partner.partner=null);for(let t=this.demons.length-1;t>=0;--t)if(this.demons[t]===e)return void this.demons.splice(t,1)}}const be=new Array(6);for(let e=0;e<6;++e)be[e]=`sfx/pulses-${e}.mp3`;let ke,Ce=!1;function Be(){ke=new De,Ce=!1}function Oe(){!function(){const e=navigator.getGamepads();if(!e)return;let t=!1,n=!1,o=!1;for(let s=e.length-1;s>=0;--s){const i=e[s];if(!i)continue;(i.buttons[14]?.pressed||i.buttons[4]?.pressed||i.buttons[10]?.pressed)&&(t=!0),(i.buttons[15]?.pressed||i.buttons[5]?.pressed||i.buttons[11]?.pressed)&&(n=!0);const r=i.axes[0];r<-.5?t=!0:r>.5&&(n=!0),(i.buttons[0]?.pressed||i.buttons[1]?.pressed||i.buttons[2]?.pressed||i.buttons[3]?.pressed||i.buttons[6]?.pressed||i.buttons[7]?.pressed||i.buttons[8]?.pressed||i.buttons[9]?.pressed)&&(o=!0)}t?$||(X=P+1):$&&(X=0),$=t,n?j||(P=X+1):j&&(P=0),j=n,o?z||(Q=!0):z&&(Q=!1),z=o}();const{cannon:e,cannonBullet:t,demons:n,demonBullets:o}=ke;if(ke.animatingGameOver)ke.baseColor<v.length-1?++ke.baseColor:(ke.newHighScore&&(ke.scoreColor=ke.scoreColor+1&255),(U()||q())&&Be(),ee()?Ce=!0:Ce&&Be());else if(8!==ke.spawnedDemons||0!==n.length||0!==o.length||e.exploding||(ke.incrementLevel(),e.exploded||6===ke.bunkers?(e.reset(),t.load(),ke.pulseCounter=0):(ke.animatingExtraBunker=!0,u("sfx/awards-bunker.mp3"))),ke.animatingExtraBunker&&(ke.bunkerColor===w.length-1?(ke.animatingExtraBunker=!1,ke.bunkerColor=0,ke.pulseCounter=0,++ke.bunkers,e.reset(),t.load()):++ke.bunkerColor),ke.animatingExtraBunker||function(){const{demons:e}=ke;let t=!1,n=!1,o=!1;for(let s=e.length-1;s>=0;--s){const i=e[s];if(i.spawning>0)return;switch(i.tier){case G.TOP:t=!0;break;case G.MIDDLE:n=!0;break;case G.BOTTOM:o=!0}}if(ke.spawnDelay>0)return void--ke.spawnDelay;let s=56,i=141,r=G.NONE;if(o)if(n){if(!t){r=G.TOP,i-=16;for(let t=e.length-1;t>=0;--t){const n=e[t];n.tier>G.TOP&&(i=Math.min(i,n.yEaser.getMin()-8))}}}else{r=G.MIDDLE,s+=8,i-=8;for(let t=e.length-1;t>=0;--t){const n=e[t];n.tier<G.MIDDLE?s=Math.max(s,n.yEaser.getMax()+8):n.tier>G.MIDDLE&&(i=Math.min(i,n.yEaser.getMin()-8))}}else{r=G.BOTTOM,s+=16;for(let t=e.length-1;t>=0;--t){const n=e[t];n.tier<G.BOTTOM?s=Math.max(s,n.yEaser.getMax()+8):n.tier>G.BOTTOM&&(i=Math.min(i,n.yEaser.getMin()-8))}}r!==G.NONE&&i-s+1>=8&&ke.spawnedDemons<8&&(e.push(new Ee(Math.floor(20+123*Math.random()),s+(i-s)*Math.random(),r)),++ke.spawnedDemons,ke.spawnDelay=8+Math.floor(24*Math.random()),u("sfx/spawns-demon.mp3"))}(),e.update(ke),!ke.animatingGameOver){0===ke.demonBulletDropTimer&&(ke.demonBulletDropTimer=ke.demonBulletDropTimerReset),--ke.demonBulletDropTimer;for(let e=o.length-1;e>=0;--e)o[e].update(ke);for(let e=n.length-1;e>=0;--e)n[e].update(ke);if(ke.level>=4&&8===ke.spawnedDemons){let e=G.TOP;for(let t=n.length-1;t>=0;--t)n[t].tier>G.BOTTOM||(e=Math.max(e,n[t].tier));const t=G.BOTTOM-e;if(t>0)for(let e=n.length-1;e>=0;--e){const o=n[e];o.tier>G.BOTTOM||(o.tier+=t)}}t.update(ke),ke.pulseCounter=ke.pulseCounter+1&31,ke.divingDemon?15&ke.pulseCounter||u("sfx/dives-demon.mp3"):0===ke.pulseCounter&&u(be[R(ke.spawnedDemons-3,0,5)])}}const Ie=1e3/60,Te=5;let Le=!1,Se=0,Ne=0,Ge=0;function Fe(){Le||(Le=!0,Ge=0,Se=requestAnimationFrame(Re),Ne=performance.now())}function He(){Le&&(Le=!1,cancelAnimationFrame(Se))}function Re(){if(!Le)return;Se=requestAnimationFrame(Re),st();const e=performance.now(),t=e-Ne;Ne=e,Ge+=t;let n=0;for(;Ge>=Ie&&Le;)if(Oe(),Ge-=Ie,++n>Te){Ge=0,Ne=performance.now();break}}let _e,Xe,Pe,Qe,Ye,Ke,We,Je=null,$e=!1;function je(){!$e&&null===Je&&"wakeLock"in navigator&&($e=!0,navigator.wakeLock.request("screen").then((e=>{$e&&(Je=e,Je.addEventListener("release",(()=>{$e||(Je=null)})))})).catch((e=>{})).finally((()=>$e=!1)))}let ze,Ve,Ze,Ue,qe=null,et=!1;function tt(){if(null!==qe&&(qe(),qe=null),et)return;const e=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);e.addEventListener("change",tt),qe=()=>e.removeEventListener("change",tt),it()}function nt(){et||(et=!0,He(),window.removeEventListener("click",se),window.removeEventListener("mousemove",ne),window.removeEventListener("mouseenter",ne),window.removeEventListener("mouseleave",te),te(),window.removeEventListener("keydown",ie),window.removeEventListener("keyup",re),window.removeEventListener("touchstart",oe),window.removeEventListener("touchmove",oe),window.removeEventListener("touchend",oe),window.removeEventListener("touchcancel",oe),X=0,P=0,Q=!1,Y=!1,K=!1,Z.clear(),null!==Je&&"wakeLock"in navigator&&($e=!1,Je.release().then((()=>{$e||(Je=null)})).catch((e=>{}))),window.removeEventListener("beforeunload",at),window.removeEventListener("resize",it),window.removeEventListener("focus",rt),window.removeEventListener("blur",rt),document.removeEventListener("visibilitychange",rt),null!==qe&&(qe(),qe=null),ke.save())}function ot(){nt(),ct()}function st(){Pe?We&&(Pe.imageSmoothingEnabled=!1,Pe.fillStyle="#0F0F0F",Pe.fillRect(0,0,Qe,Ye),We.imageSmoothingEnabled=!1,function(e){e.fillStyle=g[ke.backgroundColor],e.fillRect(0,0,160,199),e.drawImage(v[ke.baseColor],0,199,160,29);for(let t=ke.bunkers-1;t>=0;--t)e.drawImage(w[ke.bunkerColor],17+(t<<3),199);{const t=y[ke.scoreColor];let n=ke.score,o=96;for(;e.drawImage(t[n%10],o,18),n=Math.floor(n/10),0!==n;)o-=8}const{cannon:t,cannonBullet:n,demons:o,demonBullets:s}=ke;if(ke.animatingGameOver)ke.baseColor===v.length-1&&t.render(ke,e);else{t.render(ke,e);for(let t=s.length-1;t>=0;--t)s[t].render(ke,e);for(let t=o.length-1;t>=0;--t)o[t].render(ke,e);n.render(ke,e)}}(We),Pe.drawImage(Ke,Ze,Ue,ze,Ve),Pe.imageSmoothingEnabled=!0,Pe.fillStyle="#FFFFFF",Pe.fillRect(27,21,18,1),Pe.fillRect(27,27,18,1),Pe.fillRect(27,33,18,1)):it()}function it(){if(et)return;Pe=null,Xe=document.getElementById("main-canvas"),Xe.style.display="none";const e=window.innerWidth,t=window.innerHeight;Xe.style.display="block",Xe.style.width=`${e}px`,Xe.style.height=`${t}px`,Xe.style.position="absolute",Xe.style.left="0px",Xe.style.top="0px",_e=window.devicePixelRatio||1,Xe.width=Math.floor(_e*e),Xe.height=Math.floor(_e*t);const n=new DOMMatrix;e>=t?(Qe=e,Ye=t,n.a=n.d=_e,n.b=n.c=n.e=n.f=0):(Qe=t,Ye=e,n.a=n.d=n.e=0,n.c=_e,n.b=-n.c,n.f=_e*t),Pe=Xe.getContext("2d"),Pe&&(Pe.setTransform(n),Ve=Ye,ze=Ve*p.WIDTH/p.HEIGHT,ze>Qe?(ze=Qe,Ve=ze*p.HEIGHT/p.WIDTH,Ze=0,Ue=Math.round((Ye-Ve)/2)):(Ze=Math.round((Qe-ze)/2),Ue=0),st())}function rt(){!et&&"visible"===document.visibilityState&&document.hasFocus()?(je(),Fe()):He()}function at(){nt()}let lt=!1;function ct(){document.body.style.backgroundColor="#0F0F0F",window.addEventListener("resize",mt),window.addEventListener("touchmove",dt,{passive:!1}),document.getElementById("main-content").innerHTML=`\n            <div id="start-container">\n                <div id="start-div">\n                    <div id="high-score-div">High Score: ${ce.highScore}</div>\n                    <div class="volume-div">\n                        <span class="left-volume-label material-icons" id="left-volume-span" \n                                lang="en">volume_mute</span>\n                        <input type="range" id="volume-input" min="0" max="100" step="any" value="10">\n                        <span class="right-volume-label" id="right-volume-span" lang="en">100</span>\n                    </div>\n                    <div class="checkboxes-div">\n                        <div class="checkbox-item">\n                            <input type="checkbox" id="autofire-checkbox" name="autofire-checkbox">\n                            <label for="autofire-checkbox">\n                                <span class="custom-checkbox"></span>\n                                Autofire\n                            </label>\n                        </div>\n                        <div class="checkbox-item">\n                            <input type="checkbox" id="tracer-checkbox" name="tracer-checkbox">\n                            <label for="tracer-checkbox">\n                                <span class="custom-checkbox"></span>\n                                Tracer\n                            </label>\n                        </div>\n                        <div class="checkbox-item">\n                            <input type="checkbox" id="fast-checkbox" name="fast-checkbox">\n                            <label for="fast-checkbox">\n                                <span class="custom-checkbox"></span>\n                                Fast\n                            </label>\n                        </div>\n                    </div>\n                    <div id="go-div">\n                        <button id="start-button">${0===ce.score&&0===ce.level&&3===ce.bunkers&&0===ce.spawnedDemons?"Start":"Continue"}</button>\n                    </div>\n                </div>\n            </div>`,d(ce.volume);const e=document.getElementById("volume-input");e.addEventListener("input",ut),e.value=String(ce.volume),document.getElementById("autofire-checkbox").checked=ce.autofire,document.getElementById("tracer-checkbox").checked=ce.tracer,document.getElementById("fast-checkbox").checked=ce.fast,document.getElementById("start-button").addEventListener("click",ht),mt()}function ht(){d(ce.volume);const e=document.getElementById("autofire-checkbox");ce.autofire=e.checked;const t=document.getElementById("tracer-checkbox");ce.tracer=t.checked;const n=document.getElementById("fast-checkbox");ce.fast=n.checked,function(){window.removeEventListener("resize",mt),window.removeEventListener("touchmove",dt),document.getElementById("volume-input").removeEventListener("input",ut),document.getElementById("start-button").removeEventListener("click",ht);const e=document.getElementById("autofire-checkbox");ce.autofire=e.checked;const t=document.getElementById("tracer-checkbox");ce.tracer=t.checked;const n=document.getElementById("fast-checkbox");ce.fast=n.checked,he()}(),et=!1,Be(),document.body.style.backgroundColor="#C2BCB1",Ke=document.createElement("canvas"),Ke.width=f.WIDTH,Ke.height=f.HEIGHT,We=Ke.getContext("2d"),document.getElementById("main-content").innerHTML='<canvas id="main-canvas" class="canvas" width="1" height="1"></canvas>',Xe=document.getElementById("main-canvas"),Xe.style.touchAction="none",window.addEventListener("beforeunload",at),window.addEventListener("resize",it),window.addEventListener("focus",rt),window.addEventListener("blur",rt),document.addEventListener("visibilitychange",rt),je(),tt(),window.addEventListener("click",se),window.addEventListener("mousemove",ne),window.addEventListener("mouseenter",ne),window.addEventListener("mouseleave",te),ne(),window.addEventListener("touchstart",oe,{passive:!1}),window.addEventListener("touchmove",oe,{passive:!1}),window.addEventListener("touchend",oe,{passive:!1}),window.addEventListener("touchcancel",oe,{passive:!1}),window.addEventListener("keydown",ie),window.addEventListener("keyup",re),X=0,P=0,Q=!1,Y=!1,K=!1,Z.clear(),Fe()}function dt(e){let t=e.target;for(;null!==t;){if("volume-input"===t.id){if(lt)return;const n=t,o=parseFloat(n.max),s=parseFloat(n.min),i=n.getBoundingClientRect(),r=(1-(e.touches[0].clientY-i.top)/i.height)*(o-s)+s;return n.value=r.toString(),void n.dispatchEvent(new Event("input"))}t=t.parentElement}e.preventDefault()}function ut(){const e=document.getElementById("left-volume-span"),t=document.getElementById("volume-input"),n=document.getElementById("right-volume-span");ce.volume=100*(+t.value-+t.min)/(+t.max-+t.min),t.style.setProperty("--thumb-position",`${ce.volume}%`),0===ce.volume?e.textContent="volume_off":ce.volume<33?e.textContent="volume_mute":ce.volume<66?e.textContent="volume_down":e.textContent="volume_up",n.textContent=String(Math.round(ce.volume))}function mt(){const e=document.getElementById("start-container"),t=document.getElementById("start-div"),n=document.getElementById("left-volume-span"),o=document.getElementById("right-volume-span");e.style.width=e.style.height="",e.style.left=e.style.top="",e.style.display="none",t.style.left=t.style.top=t.style.transform="",t.style.display="none";const s=window.innerWidth,i=window.innerHeight;if(lt=s>=i,e.style.left="0px",e.style.top="0px",e.style.width=`${s}px`,e.style.height=`${i}px`,e.style.display="block",t.style.display="flex",n.style.width="",n.style.display="inline-block",n.style.textAlign="center",n.textContent="🔇",n.style.transform="",o.style.width="",o.style.display="inline-block",o.style.textAlign="center",o.textContent="100",lt){const e=n.getBoundingClientRect().width;n.style.width=`${e}px`;const r=o.getBoundingClientRect().width;o.style.width=`${r}px`;const a=t.getBoundingClientRect();t.style.left=(s-a.width)/2+"px",t.style.top=(i-a.height)/2+"px"}else{const e=n.getBoundingClientRect().height;n.style.width=`${e}px`;const r=o.getBoundingClientRect().height;o.style.width=`${r}px`,t.style.transform="rotate(-90deg)";const a=t.getBoundingClientRect();t.style.left=(s-a.height)/2+"px",t.style.top=(i-a.width)/2+"px"}o.textContent=String(ce.volume),ut()}let ft,pt=!1;function gt(){window.removeEventListener("resize",Et),window.removeEventListener("touchmove",xt),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",wt),function(){if(ce)return;const e=localStorage.getItem(ae);if(e)try{ce=JSON.parse(e)}catch{ce=new le}else ce=new le}(),async function(){let e;!function(e){e[e.DEMON_COLS=0]="DEMON_COLS",e[e.CANNON_EXPLODES_COLS=56]="CANNON_EXPLODES_COLS",e[e.CANNON_GFX=61]="CANNON_GFX",e[e.BUNKER_GFX=73]="BUNKER_GFX",e[e.CANNON_EXPLODES_GFX=79]="CANNON_EXPLODES_GFX",e[e.DEMON_EXPLODES_GFX=119]="DEMON_EXPLODES_GFX",e[e.DEMON_GFX=143]="DEMON_GFX",e[e.DEMON_SPLITS_GFX=287]="DEMON_SPLITS_GFX",e[e.SPLIT_DEMON_GFX=311]="SPLIT_DEMON_GFX",e[e.DIGITS_GFX=335]="DIGITS_GFX",e[e.DEMON_SHOTS=435]="DEMON_SHOTS"}(e||(e={}));const t=function(){const e=new Array(256),t=atob("AAAAPz8+ZGRjhISDoqKhurq50tLR6urpPT0AXl4Ke3sVmZkgtLQqzc005uY+/f1IcSMAhj0LmVcYrW8mvYYyzZs+3LBJ6sJUhhUAmi8OrkgewGEv0Xc+4I1N76Jb/bVoigAAnhMSsSgnwj080lFQ4mRj73V0/YaFeQBYjRJuoCeEsTuYwE6q0GG83XHM6oLcRQB4XRKPciekiDu5m07KrmHcv3Hs0IL7DgCFKROZQyitXT2/dFHQi2TfoXXutYb7AACKEhOdJCiwNz3BSVHRWmTganXueYb7ABV9EjGTJEynN2e7SYDMWpfdaq7tecL7ACdYEkV0JGKNN36nSZe+WrDUasfoed37ADUmEldCJHZdN5V2SbGOWsylauW7ef3PADkAE1sSKHknPZc8UbNQZM1jdeZ0hv2FDjIAK1QRR3MjY5M2fbBIlctZreVpwv14Jy4ARU4PYmshfogzl6NDsLxTx9Ri3epwPSMAXkINe18dmXsttJY7za9K5sdX/d1k");for(let n=0;n<=255;++n){const o=3*(n>>1),s=new m(t.charCodeAt(o),t.charCodeAt(o+1),t.charCodeAt(o+2));e[n]=s,g[n]=`#${(s.r<<16|s.g<<8|s.b).toString(16).padStart(6,"0")}`}return e}(),n=atob("yMiISDgodngMDIp6alpKOkhISHiImKi4xsbGxu7ubGxGRkZGPj6cnIaGSEjk5CgoODhISGhoeHiKakp6msbGxsbu7mxsKCgoKAAoKDgQEAYDAQAABgEEAgAKAAIQBBACBEAQABCCRAAAQJACCECACAAkgAAAAIQAiCAIAAJAEABACEAEAEgCAEQAQAQgCQAAAwcOGfACAAAGA85xAAQAAExGIx8CAQgAECEiJBQPDABAgoRkHwYAAEQkFA8DAAAANh0CBAoEAAAJHjIkCAoAAAKfsuRIECQAn4+HiJBkAABPmIyHiHAEACdMmIyHSDIABEQkIyMUCAAgJCgkIycYABAgSERCRz8AAAAAAQEAAAAAAAMFAwAAAAAGCQkJBgAAIAQRgBRCkABABBKgFECEAAAgFGgIFCAAAAAQKGzGggAAgoLWbAAAAABEgoLGfBB8ZGRkZGRkZHwAGBgYGBgYGBg4AHxMTEA8DExMfAB8TEwMOAxMTHwADAx+TExMTExMAHxMTAwMfEBMfAB8TExMfEBMTHwAMDAwGBgMTEx8AHxMTEx8ZGRkfAB8TEwMfExMTHwAgCAQUEGEiEJACAQBgSIRRA==");for(let e=0;e<121;++e)v[e]=L(1,29,(n=>{for(let o=0,s=120===e?76:140+e&255;o<29;++o)N(n,0,o,t[255&s]),o<6&&(s-=2)}));await T();for(let o=0;o<62;++o){const s=t[0===o?76:194+o];w[o]=L(3,5,(t=>{const o=e.BUNKER_GFX+5;for(let e=0;e<5;++e){const i=n.charCodeAt(o-e);for(let n=0,o=32;n<3;++n,o>>=1)i&o&&N(t,n,e,s)}}))}await T();for(let o=0;o<256;++o){const s=t[o];y[o]=new Array(10);for(let t=0;t<10;++t)y[o][t]=L(6,9,(o=>{const i=e.DIGITS_GFX+10*(t+1)-2;for(let e=0;e<9;++e){const t=n.charCodeAt(i-e);for(let n=0,i=64;n<6;++n,i>>=1)t&i&&N(o,n,e,s)}}));15&o||await T()}await T();for(let o=0;o<7;++o){const s=e.DEMON_COLS+(o<<3);x[o]=new Array(6);for(let i=0;i<6;++i){const r=e.DEMON_GFX+24*i;x[o][i]=new Array(3);for(let e=0;e<3;++e){const a=r+(e<<3);x[o][i][e]=L(16,8,(e=>{for(let o=0;o<8;++o){const i=t[n.charCodeAt(s+o)],r=n.charCodeAt(a+o);for(let t=0,n=128;t<8;++t,n>>=1)r&n&&(N(e,t,7-o,i),N(e,15-t,7-o,i))}}))}}}await T();for(let e=0;e<6;++e){E[e]=new Array(3);for(let t=0;t<3;++t)E[e][t]=S(x[0][e][t])}for(let o=0;o<7;++o){const s=e.DEMON_COLS+(o<<3);A[o]=new Array(2);for(let i=0;i<2;++i){const r=0===i?e.DEMON_EXPLODES_GFX:e.DEMON_SPLITS_GFX;A[o][i]=new Array(3);for(let e=0;e<3;++e){const a=r+(e<<3);A[o][i][2-e]=L(16,8,(e=>{for(let o=0;o<8;++o){const i=t[n.charCodeAt(s+o)],r=n.charCodeAt(a+o);for(let t=0,n=128;t<8;++t,n>>=1)r&n&&(N(e,t,7-o,i),N(e,15-t,7-o,i))}}))}}}await T();for(let o=0;o<7;++o){const s=e.DEMON_COLS+(o<<3);M[o]=new Array(3);for(let i=0;i<3;++i){const r=e.DEMON_EXPLODES_GFX+(i<<3);M[o][i]=new Array(2);for(let e=0;e<2;++e)M[o][i][e]=L(8,8,(o=>{for(let i=0;i<8;++i){const a=t[n.charCodeAt(s+i)],l=n.charCodeAt(r+i);for(let t=0,n=128;t<8;++t,n>>=1)l&n&&N(o,1===e?7-t:t,7-i,a)}}))}}await T();for(let t=0;t<16;++t){D[t]=[];const o=n.charCodeAt(e.DEMON_SHOTS+t);for(let e=0,n=128;e<8;++e,n>>=1)o&n&&D[t].push(e)}await T();for(let o=0;o<7;++o){const s=e.DEMON_COLS+(o<<3);b[o]=new Array(3);for(let i=0;i<3;++i){const r=e.SPLIT_DEMON_GFX+(i<<3);b[o][i]=L(8,8,(e=>{for(let o=0;o<8;++o){const i=t[n.charCodeAt(s+o)],a=n.charCodeAt(r+o);for(let t=0,n=128;t<8;++t,n>>=1)a&n&&N(e,t,7-o,i)}}))}}await T();for(let e=0;e<3;++e)k[e]=S(b[0][e]);await T();for(let o=0;o<7;++o){const s=e.DEMON_COLS+(o<<3);C[o]=new Array(3);for(let i=0;i<3;++i){const r=e.DEMON_SPLITS_GFX+(i<<3);C[o][2-i]=L(8,8,(e=>{for(let o=0;o<8;++o){const i=t[n.charCodeAt(s+o)],a=n.charCodeAt(r+o);for(let t=0,n=128;t<8;++t,n>>=1)a&n&&N(e,t,7-o,i)}}))}}await T();const o=t[86];B=L(7,12,(t=>{const s=e.CANNON_GFX+11;for(let e=0;e<12;++e){const i=n.charCodeAt(s-e);for(let n=0,s=128;n<7;++n,s>>=1)i&s&&N(t,n,e,o)}})),O=S(B),await T();for(let o=0;o<8;++o){const s=e.CANNON_EXPLODES_GFX+5*o;I[o]=L(16,34,(o=>{for(let i=0;i<5;++i){const r=t[n.charCodeAt(e.CANNON_EXPLODES_COLS+i)],a=32-(i<<3),l=n.charCodeAt(s+i);for(let e=0,t=128;e<8;++e,t>>=1)l&t&&(N(o,e,a,r),N(o,15-e,a,r),N(o,e,a+1,r),N(o,15-e,a+1,r))}}))}}()}function vt(e){if(ft){if(e===ft.style.color)return;ft.style.color=e}const t="progress-bar-style";let n=document.getElementById(t);n||(n=document.createElement("style"),n.id=t,document.head.appendChild(n)),n.innerText=`\n        #loading-progress::-webkit-progress-value {\n            background-color: ${e} !important;\n        }\n        #loading-progress::-moz-progress-bar {\n            background-color: ${e} !important;\n        }\n    `}function wt(e){ft&&(ft.value=100*e.data,vt("#48D800"))}function yt(e){(new(s())).loadAsync(e).then((e=>Object.entries(e.files).forEach((e=>{const[t,n]=e;var o,s;n.dir||t.endsWith(".mp3")&&(o=t,s=n,c.push(s.async("arraybuffer").then((e=>r.decodeAudioData(e))).then((e=>h.set(o,e)))))})))),async function(){return Promise.all(c).then((()=>c.length=0))}().then((()=>{document.getElementById("loading-progress").value=100,gt(),ct()}))}function xt(e){e.preventDefault()}function Et(){const e=document.getElementById("progress-container"),t=document.getElementById("progress-div");e.style.width=e.style.height="",e.style.left=e.style.top="",e.style.display="none",t.style.top=t.style.left=t.style.transform="",t.style.display="none";const n=window.innerWidth,o=window.innerHeight;if(pt=n>=o,e.style.left="0px",e.style.top="0px",e.style.width=`${n}px`,e.style.height=`${o}px`,e.style.display="block",t.style.display="flex",pt){const e=t.getBoundingClientRect();t.style.left=(n-e.width)/2+"px",t.style.top=(o-e.height)/2+"px"}else{t.style.transform="rotate(-90deg)";const e=t.getBoundingClientRect();t.style.left=(n-e.height)/2+"px",t.style.top=(o-e.width)/2+"px"}}let At=!1;function Mt(e){e.preventDefault()}function Dt(){const e=document.getElementById("death-div");e.style.top=e.style.left=e.style.transform="",e.style.display="none";const t=window.innerWidth,n=window.innerHeight;if(At=t>=n,e.style.display="flex",At){const o=e.getBoundingClientRect();e.style.left=(t-o.width)/2+"px",e.style.top=(n-o.height)/2+"px"}else{e.style.transform="rotate(-90deg)";const o=e.getBoundingClientRect();e.style.left=(t-o.height)/2+"px",e.style.top=(n-o.width)/2+"px"}}function bt(){window.addEventListener("error",(e=>{console.error(`Caught in global handler: ${e.message}`,{source:e.filename,lineno:e.lineno,colno:e.colno,error:e.error}),e.preventDefault(),window.addEventListener("resize",Dt),window.addEventListener("touchmove",Mt,{passive:!1}),document.getElementById("main-content").innerHTML='<div id="death-div"><span id="fatal-error">&#x1F480;</span></div>',Dt()})),window.addEventListener("unhandledrejection",(e=>e.preventDefault())),document.addEventListener("dblclick",(e=>e.preventDefault()),{passive:!1}),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.bundle.js"),window.addEventListener("resize",Et),window.addEventListener("touchmove",xt,{passive:!1}),document.getElementById("main-content").innerHTML='\n            <div id="progress-container">\n                <div id="progress-div">\n                    <progress id="loading-progress" value="0" max="100"></progress>\n                </div>\n            </div>',ft=document.getElementById("loading-progress"),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",wt),Et(),async function(){for(let t=i-1;t>=0;--t)try{const t=await fetch("resources.zip");if(!t.ok)continue;const n=t.headers.get("Content-Length");if(!n)continue;const o=parseInt(n);if(isNaN(o)||o<=0)continue;const s=t.body;if(null===s)continue;const i=s.getReader(),r=[];let a=0;for(;;){const{done:t,value:n}=await i.read();if(t)break;r.push(n),a+=n.length,e=a/o,ft.value=100*e,vt("#0075FF")}const l=new Uint8Array(a);let c=0;return r.forEach((e=>{l.set(e,c),c+=e.length})),l}catch(e){if(0===t)throw e}var e;throw new Error("Failed to fetch.")}().then(yt)}}}]);